---
title: Fyrirlestur ‚Äì JavaScript f√∂ll
---

# Fyrirlestur ‚Äì JavaScript f√∂ll

## Vefforritun 1 ‚Äî T√ñL107G

### √ìlafur Sverrir Kjartansson, [osk@hi.is](mailto:osk@hi.is)

---

> People think that computer science is the art of geniuses but the actual reality is the opposite, just many people doing things that build on each other, like a wall of mini stones.
>
> ‚ÄîDonald Knuth

***

## F√∂ll

* [F√∂ll](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions) eru _blokkir_ af k√≥√∞a sem geta haft nafn
* Notum til a√∞ skipuleggja k√≥√∞a og draga √∫r endurtekningu
* Engar e√∞a fleiri f√¶ribreytur (vi√∞f√∂ng, argument)
* Hugsanlega me√∞ skilagildi, skilgreindu me√∞ `return`
  * Ef ekki, √æ√° skilar fall `undefined`

***

## Skilgreind f√∂ll

* Skilgreinum fall me√∞ `function` (function declaration)
* Getum kalla√∞ √≠ _√°√∞ur en_ skilgreint
  * √ñll f√∂ll eru fundin √°√∞ur en forrit er keyrt og √æv√≠ a√∞gengileg

***

<!-- eslint-skip -->

```javascript
// skilgreint fall
function hello(name) {
  return `hello, ${name}!`;
}
```

<!-- eslint-skip -->

```javascript
hello('world'); // 'hello, world!'
```

<!-- eslint-skip -->

```javascript
hello(1); // 'hello, 1!'
```

***

## F√∂ll sem seg√∞ir

* Getum skilgreint f√∂ll sem seg√∞ (function expression)
* Geta veri√∞ nafnlaus (anonymous) e√∞a me√∞ nafni
* **Geta veri√∞ gildi breytu**

***

<!-- eslint-skip -->

```javascript
// nafnlaust fall      üëá megum nefna h√©r
const square = function (x) {
  return x * x;
};

console.log(typeof square); // "function"
square(3); // 9
```

***

* [function](daemi/01.function.js)
* [declaration](daemi/02.declaration.js)

---

## Scope

* Breytur eru skilgreindar me√∞ _lexical scope_ per fall
  * Breytan er a√∞eins a√∞gengileg innan falls
* En a√∞eins ef breyta er skilgreind me√∞ `let`, `const` e√∞a `var`

***

* Ef ekki er breytan sett √≠ _global scope_
  * Getur valdi√∞ lei√∞inlegum b√∂ggum
* Breytur skilgreindar utan falla eru √≠ global scope

***

## var, let & const

* √Å√∞ur en `let` og `const` voru skilgreind var a√∞eins `var`
* `var` er skilgreint fyrir global scope e√∞a lexical scope falls
* `let` og `const` eru skilgreind fyrir block, eru _block scoped_

***

<!-- eslint-skip -->

```javascript
let a = 1;
{ // n√Ωtt scope fyrir block
  let a = 2;
  console.log(a); // 2
}
console.log(a); // 1
```

***

<!-- eslint-skip -->

```javascript
let x = 10;
if (true) {
  let y = 20;
  var z = 30;
  console.log(x + y + z);
  // 60
}
// y ekki s√Ωnilegt h√©r, en z er √æa√∞
console.log(x + z);
// 40
```

***

<!-- eslint-disable no-unused-vars, no-var -->

```javascript
var i = 10;

function add(x) {
  // i er a√∞gengilegt √∫r global scope
  return x + i;
}
```

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
add(10);
```

```javascript
// 20
```

***

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
function add(x, y) {
  // sum fer h√©r √≠ global scope!
  sum = x + y;
  return sum;
}
add(1, 2); // 3
```

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
console.log(sum); // 3
```

<!-- eslint-disable no-unused-vars, no-var -->

```javascript
let sum = 5; // 5
```

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
add(5, 6); // 11
```

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
console.log(sum); // 11
```

***

* [scope](daemi/03.scope.js)

---

## Hoisting

* √ûegar breytur eru skilgreindar me√∞ `var` og √æeim gefi√∞ gildi innan falls, **er skilgreiningu breytu √Ωtt efst √≠ scope**
* √ûessi heg√∞un kallast _hoisting_ og getur l√°ti√∞ forrit virka skringilega ef ma√∞ur veit ekki af

***

## Hoisting d√¶mi

<!-- eslint-skip -->

```javascript
var foo = 1;
(function () {
  console.log(foo); // undefined
  var foo = 2;
  console.log(foo); // 2
})();
```

***

<!-- eslint-skip -->

```javascript
// t√∫lka√∞ sem...
var foo = 1;
(function () {
  var foo; //  undefined
  console.log(foo); // undefined
  foo = 2;
  console.log(foo); // 2
})();
```

***

## `let` & `const`

* `let` og `const` eru block scoped og losna vi√∞ a√∞ √æurfa hoisting
  * Notum √æv√≠ eing√∂ngu √≠ sta√∞ `var`

***

* [hoisting](daemi/05.hoisting.js)

---

## Arrow functions

* Stuttur syntax fyrir f√∂ll me√∞ ‚Äûfat arrow‚Äú: `() => {}`
  * Megum sleppa sviga ef ein f√¶ribreyta
  * Skila gildi ef eitt statement, annars `return`

***

```javascript
// eitt statement, sj√°lfkrafa skila√∞
const multiply = x => x * 2;
console.log(multiply(10)); // 20
```

***

```javascript
const addition = (x, y) => {
  const sum = x + y;
  return sum;
};
console.log(addition(1, 2)); // 3
```

***

* [arrow](daemi/06.arrow.js)

---

## Nafnlaus f√∂ll

* Vi√∞ getum bundi√∞ f√∂ll vi√∞ breytur √°n √æess a√∞ gefa √æeim n√∂fn
  * _anonymous function_
* √ûar sem f√∂ll eru gildi getum vi√∞ l√≠ka skila√∞ _f√∂llum √∫r f√∂llum_

***

<!-- eslint-disable no-unused-vars, func-names -->

```javascript
const hi = function (name) {
  return `hello, ${name}`;
};
```

<!-- eslint-disable no-undef -->

```javascript
hi('world');
```

```javascript
// 'hello, world!'
```

<!-- eslint-disable no-undef -->

```javascript
hi = null; // falli√∞ horfi√∞!
```

<!-- eslint-disable no-undef -->

```javascript
hi('world');
```

```javascript
// Uncaught TypeError: hi is not a function
```

***

## F√∂ll sem skilagildi

<!-- eslint-disable no-unused-vars -->

```javascript
function greeter(greeting) {
  // H√©r myndum vi√∞ _lokun_ yfir greeting
  return name => `${greeting} ${name}`;
}
```

<!-- eslint-disable no-undef, no-unused-vars -->

```javascript
const hello = greeter('hello');
const hi = greeter('hi');
```

<!-- eslint-disable no-undef -->

```javascript
hello('world'); // "hello world"
```

<!-- eslint-disable no-undef -->

```javascript
hi('world'); // "hi world"
```

***

* [anon](daemi/07.anon.js)
* [return-func](daemi/08.return-func.js)

---

## F√¶ribreytur (parameters)

* F√¶ribreytur √° f√∂llum hafa ekki t√Ωpur heldur gildi√∞
* Fall getur √æv√≠ teki√∞ inn f√¶ribreytur sem geta veri√∞ _hva√∞a gildi sem er_
* Primitives (string, number, boolean, undefined) eru _pass by value_
* Objects eru _pass by reference_

***

<!-- eslint-disable no-unused-vars, no-param-reassign -->

```javascript
function alter(obj) {
  obj.bar = 1;
}
```

<!-- eslint-disable no-undef -->

```javascript
const foo = { bar: 2 };
alter(foo);
```

<!-- eslint-disable no-undef, no-unused-expressions -->

```javascript
foo.bar;
```

```javascript
// 1
```

***

## Fall sem f√¶ribreyta

<!-- eslint-disable no-unused-vars -->

```javascript
function foo(x, g) {
  return x + g();
}
```

<!-- eslint-disable no-undef -->

```javascript
foo(1, () => 2);
```

```javascript
// 3
```

***

## Sj√°lfgefin gildi √≠ f√∂llum

```javascript
function add(a = 0, b = 0) {
  return a + b;
}

add(); // 0
add(1); // 1
add(1, 2); // 3
```

***

## Variadic functions

* Getum skilgreint f√∂ll sem taka √≥skilgreindan fj√∂lda af f√¶ribreytum
  * _variadic function_

***

* H√∂fum `arguments` hlut innan hvers fall sem er geymsla (ekki fylki) af f√¶ribreytum
  * Ekki fylki a√∞ √æv√≠ leiti a√∞ vi√∞ h√∂fum ekki a√∞gang a√∞ algengum fylkja f√∂llum eins og `pop`, `push`
  * Fr√° og me√∞ ECMAScript 6 er √æetta ekki lengur r√°√∞l√∂g√∞ lei√∞, sj√°um me√∞ fylkjum r√°√∞lag√∞a a√∞fer√∞

***

## D√¶mi

<!-- eslint-disable no-unused-vars, prefer-rest-params -->

```javascript
// eldri lei√∞ til a√∞ skilgreina variadic f√∂ll
function avg() {
  let sum = 0;
  for (let i = 0; i < arguments.length; i++) {
    sum += arguments[i];
  }
  return sum / arguments.length;
}
```

***

* [args](daemi/09.args.js)

---

## Innri f√∂ll

* Getum skilgreint f√∂ll _innan falls_
* Innri f√∂ll eru a√∞eins √≠ scope fyrir ytra fall
* Innri f√∂ll hafa a√∞gang a√∞ scope ytra falls

***

## Lokanir ‚Äì closures

* √ûegar vi√∞ h√∂fum innri f√∂ll √æ√° myndum vi√∞ _lokun_ um umhverfi √æess
* Innra fall hefur a√∞gang a√∞ ytra scope me√∞an √æa√∞ lifir
* Breytu n√∂fn √≠ innrif√∂llum skrifa yfir ytri

***

## Lokanir - d√¶mi

<!-- eslint-disable no-unused-vars -->

```javascript
function makeAdder(x) {
  // √æetta fall hefur alltaf a√∞gang a√∞ x
  // √æv√≠ vi√∞ myndum lokun
  return y => x + y;
}
const add4 = makeAdder(4);
console.log(add4(6)); // 10
```

***

```javascript
function outer(a) {
  const x = 1;
  function inner(b) {
    const y = 2;
    function innerinner(c) {
      const z = 3;
      return x + y + z + c;
    }
    return innerinner(b);
  }
  return inner(a);
}
outer(10); // 16
```

***

* [closures](daemi/10.closures.js)
